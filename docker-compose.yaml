services:
  urchin:
    build: .
    container_name: urchin_bot
    restart: unless-stopped
    
    # Security hardening
    security_opt:
      - no-new-privileges:true
    read_only: true
    user: "urchin_user"
    
    volumes:
      # Map database with read/write access
      - ./urchin_db:/app/urchin_db
      # Mount config directly to allow host modifications without rebuilds
      - ./config.toml:/app/config.toml:ro

    env_file:
      - .env

    environment:
      - RUST_LOG=info